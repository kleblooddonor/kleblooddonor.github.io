<!DOCTYPE html>
<html>
<head>



	<!-- msrit Assist -->
	<title>BLOOD DONORS</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="icon" type="image/gif/png" href="red.png">

	<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
	
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<script language="javascript" type="text/javascript" src="js/p5.js"></script>
	<script language="javascript" type="text/javascript" src="js/p5.dom.js"></script>
	<script type="text/javascript" src="js/exam.js"></script>




	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/css/bootstrap.min.css" integrity="sha384-Smlep5jCw/wG7hdkwQ/Z5nLIefveQRIY9nfy6xoR1uRYBtpZgI6339F5dgvm/e9B" crossorigin="anonymous">
	<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

	<style>


		#mytable {
			font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
			border-collapse: collapse;
			width: 100%;
		}

		#mytable td, #mytable th {
			border: 1px solid #ddd;
			padding: 8px;
		}

		#mytable tr:nth-child(even){background-color: #f2f2f2;}

		#mytable tr:hover {background-color: #ddd;}

		#mytable th {
			padding-top: 12px;
			padding-bottom: 12px;
			text-align: left;
			background-color: #4CAF50;
			color: white;
		}
	</style>

</head>
<body onload="myFunction";>


	
	<div class="fixed-top">

		<nav class="navbar navbar-expand-lg navbar-dark mx-background-top-linear">
			<div class="container">
				<a class="navbar-brand" href="index.html" style="text-transform: uppercase;"> BLOOD DONORS</a>
				<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse" id="navbarResponsive">

					<ul class="navbar-nav ml-auto">

						<li class="nav-item active">
							<a class="nav-link" href="index.html">Home
								<span class="sr-only">(current)</span>
							</a>
						</li>

          <!-- <li class="nav-item">
            <a class="nav-link" href="sis.html">SIS Portal</a>
        </li> -->

        <li class="nav-item">
        	<a class="nav-link" href="exam.html">Exam results</a>
        </li>

        <li class="nav-item">
        	<a class="nav-link" href="blood_donor_auth.html">Blood donors</a>
        </li>

        <li class="nav-item">
        	<a class="nav-link" href="about.html">About</a>
        </li>

        <li class="nav-item">
        	<a class="nav-link" href="feedback.html">Feedback</a>
        </li>
    </ul>
</div>
</div>
</nav>
</div>



<h2 id ="exam_head">Blood Donors</h2>


<div id="head"></div>

<table id="mytable">
	
	<tr id="header">
		
		
	</tr>
	

</table>


</body>

<script type="text/javascript">




	var txt;
	var str1;
	var name;
	var data;
	var n1,n2,n3;
	var string = window.location.search;
	var url = "blood_donor.txt";
	var num;

	function setup(){
		var str1 = window.localStorage.getItem("blood");
		if(str1 == 'donor')
		{
			console.log("correct");  
		}
		else
		{
			window.open("blood_donor_auth.html","_self");
			console.log("wrong");
		}
		loadFile();
		
	}



	function loadFile(){
		loadStrings(url,fileLoaded);
	}

	function fileLoaded(txt){
		

		string = string.replace("?type=","")
		if(string == "0")
			str1 = "0"
		if(string == "1")
			str1 = "O+"
		if(string == "2")
			str1 = "A+"
		if(string == "3")
			str1 = "B+"
		if(string == "4")
			str1 = "AB+"
		if(string == "5")
			str1 = "O-"
		if(string == "6")
			str1 = "A-"
		if(string == "7")
			str1 = "B-"
		if(string == "8")
			str1 = "AB-"

		var node = document.createElement("th");
		var textnode = document.createTextNode("Name");
		node.appendChild(textnode);
		document.getElementById("header").appendChild(node);

		var node = document.createElement("th");
		var textnode = document.createTextNode("Blood Type");
		node.appendChild(textnode);
		document.getElementById("header").appendChild(node);

		var node = document.createElement("th");
		var textnode = document.createTextNode("Age");
		node.appendChild(textnode);
		document.getElementById("header").appendChild(node);

		var node = document.createElement("th");
		var textnode = document.createTextNode("Contact Info");
		node.appendChild(textnode);
		document.getElementById("header").appendChild(node);

		var node = document.createElement("th");
		var textnode = document.createTextNode("Bangalore Resident");
		node.appendChild(textnode);
		document.getElementById("header").appendChild(node);

		var node = document.createElement("th");
		var textnode = document.createTextNode("Ramaiah Student");
		node.appendChild(textnode);
		document.getElementById("header").appendChild(node);

		var flag = 0;
		

		if(str1 == "0")
		{
			flag=1;
			var count = 1;
			for(var i=0; i<txt.length;i=i+6)
			{
				var table = document.getElementById("mytable");
				var row = table.insertRow(count);
				var cell1 = row.insertCell(0);
				var cell2 = row.insertCell(1);
				var cell3 = row.insertCell(2);
				var cell4 = row.insertCell(3);
				var cell5 = row.insertCell(4);
				var cell6 = row.insertCell(5);
				cell1.innerHTML = txt[i];
				cell2.innerHTML = txt[i+1];
				cell3.innerHTML = txt[i+2];
				
				num ="";
				num1 = "";
				var num = str(txt[i+5]);
				num = num.replace(" ","");
				var num1 = "tel:+91"+ num;
				cell4.id = num;
				var node = document.createElement("a");
				var textnode = document.createTextNode(num);
				node.appendChild(textnode);
				node.setAttribute('href', num1);
				document.getElementById(num).appendChild(node);
				


				
				cell5.innerHTML = txt[i+4];
				cell6.innerHTML = txt[i+3];
				// document.getElementById(num2).href = num1;

				count =count + 1;
			}




		}
		else
		{
			var count = 1;

			for(var i=1; i<txt.length;i=i+6)
				if(txt[i]== str1)
				{
					
					flag =1
					var table = document.getElementById("mytable");
					var row = table.insertRow(count);
					var cell1 = row.insertCell(0);
					var cell2 = row.insertCell(1);
					var cell3 = row.insertCell(2);
					var cell4 = row.insertCell(3);
					var cell5 = row.insertCell(4);
					var cell6 = row.insertCell(5);
					cell1.innerHTML = txt[i-1];
					cell2.innerHTML = txt[i];

					cell3.innerHTML = txt[i+1];
					

					num ="";
					num1 = "";
					var num = str(txt[i+4]);
					num = num.replace(" ","");
					var num1 = "tel:+91"+ num;
					cell4.id = num;
					var node = document.createElement("a");
					var textnode = document.createTextNode(num);
					node.appendChild(textnode);
					node.setAttribute('href', num1);
					document.getElementById(num).appendChild(node);
					


					cell5.innerHTML = txt[i+3];
					cell6.innerHTML = txt[i+2];

					count =count + 1;




				}

			}
			if(!flag)
			{
				alert("No Blood Donors Found for " + str1);
				window.open("blood_donor.html","_self");
			}





		}

	</script>

	</html>